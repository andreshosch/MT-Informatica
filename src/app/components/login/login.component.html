<div class="menu">
    <div class="menuLogin">
         <a *ngIf="!habilitar" class="nav-link" (click)="habilitarLogin()">
            <div class="fondoLogin">
                <i class="pi pi-user p-button-icon" style="font-size: 1.5rem; color: #107997;cursor: pointer;z-index: 2;"title="Login"></i>
            </div>
        </a> 
    </div>
    <div class="containerLogin">
        <div class="nombreUser">
            <p *ngIf="habilitar" class="nav-link userId"><span style="color: #107997; font-weight: bold;">Usuario: {{
                    this.nombre}} {{this.apellido}} <mat-icon matTooltip="Actualizar perfil" class="hover-pointer"
                        (click)="abrirPerfil()">create</mat-icon></span></p>
        </div>

        <div class="carroYLogin">
            <app-carrito [usuario]="usuario" [nombre]="nombre" [apellido]="apellido" [celular]="celular"
                *ngIf="hayUsuario" class="nav-link"></app-carrito>
            <a *ngIf="habilitar" class="nav-link" (click)="desloguear()" href="">
                <i class="pi pi-sign-out p-button-icon" style="font-size: 1.5rem; color: #107997"
                    matTooltip="Logout"></i>
            </a>
        </div>
    </div>
</div>


<div class="confirmation-dialog" *ngIf="loginProgress || dataService.loginProgressData">
    <div class="dialog-content">
        <div class="login" *ngIf="login">
            <h4>INGRESO</h4>
            <div class="loginIngreso">
                <form [formGroup]="loginUsr" (ngSubmit)="ingresoUsr()">
                    <mat-grid-list cols="4" rowHeight="70px" style="margin-top: 8%;">
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Usuario</mat-label>
                                <input matInput formControlName="usuario">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Contraseña</mat-label>
                                <input matInput formControlName="contrasena" type="password">
                            </mat-form-field>
                        </mat-grid-tile>
                    </mat-grid-list>
                    <div class="centrado">
                        <button type="submit" mat-raised-button style="margin-bottom: 40px;">Ingresar</button>
                        <button (click)="cerrarLogin()" mat-raised-button style="margin-bottom: 40px;">Cancelar</button>
                    </div>
                </form>
            </div>
            <div class="registroycancel">
                <p>Aún no tiene cuenta? registrese <a (click)="irARegistro()" class="buttonInvisible">aquí</a></p>


            </div>
        </div>
        <div class="registro" *ngIf="!login">
            <h4>REGISTRO</h4>
            <div class="registroUsr">
                <form [formGroup]="formRegistro" class="formInicio" (ngSubmit)="solicitarAlta()">

                    <mat-grid-list cols="8" rowHeight="70px" style="margin-top: 8%">
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>DNI</mat-label>
                                <input matInput formControlName="dni">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Contraseña</mat-label>
                                <input matInput formControlName="contrasena">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Situación Fiscal</mat-label>
                                <mat-select formControlName="estadoFiscal">
                                    <mat-option value="IVA Resp Inscripto">IVA Responsable Inscripto</mat-option>
                                    <mat-option value="IVA Exento">IVA Exento</mat-option>
                                    <mat-option value="Monotributista">Monotributista</mat-option>
                                    <mat-option value="Consumidor final">Consumidor final</mat-option>
                                    <mat-option value="Consumidor final">No lo sé</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field [disabled]="noRequerido">
                                <mat-label>CUIT</mat-label>
                                <input matInput formControlName="cuit">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Nombre</mat-label>
                                <input matInput formControlName="nombre">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Apellido</mat-label>
                                <input matInput formControlName="apellido">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Email</mat-label>
                                <input matInput formControlName="mail">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Telefono</mat-label>
                                <input matInput formControlName="telefono">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Domicilio</mat-label>
                                <input matInput formControlName="domicilio">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Provincia</mat-label>
                                <input matInput formControlName="provincia">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Localidad</mat-label>
                                <input matInput formControlName="localidad">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Codigo Postal</mat-label>
                                <input matInput formControlName="codigoPostal">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="8" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Observaciones</mat-label>
                                <input matInput formControlName="observaciones">
                            </mat-form-field>
                        </mat-grid-tile>
                    </mat-grid-list>
                    <div class="centrado">
                        <button type="submit" mat-raised-button color="primary"
                            [disabled]="!formRegistro.valid">Registrarme</button> 
                            <button (click)="irALogin()" mat-raised-button color="primary">Cancelar</button>
                    </div>

                </form>
            </div>

        </div>
    </div>
</div>

<div class="confirmation-dialog" *ngIf="actualizarPass">
    <div class="dialog-content">
        <div class="login">
            <h4>CAMBIO DE CLAVE</h4>
            <div class="cambio2">
                <form [formGroup]="updateUsr" (ngSubmit)="actualizarUsr()">
                    <mat-grid-list cols="4" rowHeight="70px">
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Contraseña Actual</mat-label>
                                <input matInput formControlName="contrasenaOld">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Contraseña Nueva</mat-label>
                                <input matInput formControlName="contrasenaNew">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Repita Contraseña nueva</mat-label>
                                <input matInput formControlName="contrasenaNewFactor">
                            </mat-form-field>
                        </mat-grid-tile>
                    </mat-grid-list>
                    <div class="centrado">
                        <button type="submit" mat-raised-button color="primary">Actualizar</button>
                        <button (click)="cerrarUpdate()" mat-raised-button color="primary">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>


<div class="confirmation-dialog" *ngIf="actualizarPass2">
    <div class="dialog-content">
        <div class="login">
            <h4>CAMBIO DE CLAVE</h4>
            <div class="cambio2">
                <form [formGroup]="updateUsr2" (ngSubmit)="actualizarUsr2()">
                    <mat-grid-list cols="4" rowHeight="70px">
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Contraseña Actual</mat-label>
                                <input matInput formControlName="contrasenaOld">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Contraseña Nueva</mat-label>
                                <input matInput formControlName="contrasenaNew">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Repita Contraseña nueva</mat-label>
                                <input matInput formControlName="contrasenaNewFactor">
                            </mat-form-field>
                        </mat-grid-tile>
                    </mat-grid-list>
                    <div class="centrado">
                        <button type="submit" mat-raised-button color="primary">Actualizar</button>
                        <button (click)="cerrarUpdate2()" mat-raised-button color="primary">Cancelar</button>
                    </div>
                </form>
            </div>

            <!-- <div class="registroycancel">
                <button (click)="cerrarUpdate2()" mat-raised-button color="primary">Cancelar</button>
            </div> -->
        </div>
    </div>
</div>


<div class="confirmation-dialog" *ngIf="modalPerfil">
    <div class="dialog-content">
        <div class="login">
            <div class="datos">
                <h3 style="color: #107997;">ACTUALIZACIÓN DE PERFIL</h3>
                <h4>{{usuarioAuxiliar.nombre}} {{usuarioAuxiliar.apellido}}</h4>
            </div>
            <div class="actualizacion">
                <div class="cambioPass">
                    <p (click)="updatePass()">Cambiar clave</p>
                </div>
                <form [formGroup]="updatePerfil" (ngSubmit)="actualizarPerfil()">
                    <mat-grid-list cols="8" rowHeight="70px" style="margin-top: 8%">
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Domicilio</mat-label>
                                <input matInput formControlName="domicilio" value="{{usuarioAuxiliar.domicilio}}">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Correo</mat-label>
                                <input matInput formControlName="mail" value="{{usuarioAuxiliar.mail}}">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Teléfono</mat-label>
                                <input matInput formControlName="telefono" value="{{usuarioAuxiliar.celular}}">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Provincia</mat-label>
                                <input matInput formControlName="provincia" value="{{usuarioAuxiliar.provincia}}">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Localidad</mat-label>
                                <input matInput formControlName="localidad" value="{{usuarioAuxiliar.localidad}}">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Codigo Postal</mat-label>
                                <input matInput formControlName="codigoPostal" value="{{usuarioAuxiliar.codigoPostal}}">
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Situación Fiscal</mat-label>
                                <mat-select formControlName="estadoFiscal">
                                    <mat-option value="ivaRespInscripto">IVA Responsable Inscripto</mat-option>
                                    <mat-option value="ivaExento">IVA Exento</mat-option>
                                    <mat-option value="monotributista">Monotributista</mat-option>
                                    <mat-option value="consumidorFinal">Consumidor final</mat-option>
                                    <mat-option value="indefinido">No lo sé</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </mat-grid-tile>
                        <mat-grid-tile [colspan]="4" [rowspan]="1">
                            <mat-form-field>
                                <mat-label>Observaciones</mat-label>
                                <input matInput formControlName="observaciones"
                                    value="{{usuarioAuxiliar.observaciones}}">
                            </mat-form-field>
                        </mat-grid-tile>
                    </mat-grid-list>
                    <div class="registroycancel">
                        <div class="buttonUpload">
                            <button type="submit" mat-raised-button color="primary"
                            [disabled]="!updatePerfil.valid">Actualizar</button>
                        <button (click)="modalPerfil=false" mat-raised-button color="primary">Cancelar</button>
                        </div>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>